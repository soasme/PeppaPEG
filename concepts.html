<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Peppa PEG Specification" href="spec.html" /><link rel="prev" title="How-To Guides" href="howto.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.01.02"/>
        <title>Concepts - Peppa PEG 1.16.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Peppa PEG 1.16.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Peppa PEG 1.16.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutcalc.html">Tutorial: Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutjson.html">Tutorial: JSON</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="howto.html">How-To Guides</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Concepts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="spec.html">Peppa PEG Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="lowlevel.html">Low Level APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">All APIs &amp; References</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">Change Log</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="concepts">
<h1>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h1>
<section id="what-is-a-parser">
<h2>What is a Parser?<a class="headerlink" href="#what-is-a-parser" title="Permalink to this headline">¶</a></h2>
<p>A parser is a program that takes string as input and produces a parse tree as output.</p>
<p>For example, given input <cite>print(“hello world”)</cite>, a parser can produce a tree like below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"statement"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span>
    <span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"func_call"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"identifier"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">]),</span>
        <span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"func_args"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">Node</span><span class="p">(</span><span class="n">rule_id</span><span class="o">=</span><span class="s2">"string_literal"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">19</span><span class="p">])</span>
        <span class="p">])</span>
    <span class="p">])</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Some parsers have an additional step called “tokenize” before constructing the parse tree, while PEG parser can directly build the tree from the input.</p>
<p>You can use Peppa PEG, Lex/Yacc, flex/bison, antlr, or even parse from scratch.</p>
</section>
<section id="what-is-a-grammar">
<h2>What is a Grammar?<a class="headerlink" href="#what-is-a-grammar" title="Permalink to this headline">¶</a></h2>
<p>A grammar is a set of RULES instructing a parser how to parse from the input, e.g, it is the definition of the parsing process.</p>
<p>For example, the grammar snippet below defines how to parse arithmetic expression.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">term</span> <span class="o">=</span> <span class="n">factor</span> <span class="p">((</span><span class="s2">"+"</span><span class="o">/</span><span class="s2">"-"</span><span class="p">)</span> <span class="n">factor</span><span class="p">)</span><span class="o">*</span><span class="p">;</span>
<span class="n">factor</span> <span class="o">=</span> <span class="n">number</span> <span class="p">((</span><span class="s2">"*"</span><span class="o">/</span><span class="s2">"/"</span><span class="p">)</span> <span class="n">number</span><span class="p">);</span>
<span class="n">number</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span> <span class="o">/</span> <span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span> <span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span><span class="p">;</span>
</pre></div>
</div>
<p>A parser generator can read a grammar in such a (or similar) notion and produce a parser. The produced parser then reads input and produces a tree.</p>
<p>Peppa PEG provides its own dialect of PEG for describing a grammar. It was inspired by <a class="reference external" href="https://pest.rs">Pest</a> but is more powerful and more readable.</p>
<p>See <a class="reference internal" href="spec.html#spec"><span class="std std-ref">Peppa PEG Specification</span></a> for all of the grammar rules you can use.</p>
</section>
<section id="parse-tree-v-s-abstract-syntax-tree">
<h2>Parse Tree v/s Abstract Syntax Tree<a class="headerlink" href="#parse-tree-v-s-abstract-syntax-tree" title="Permalink to this headline">¶</a></h2>
<p>Parse Tree and Abstract Syntax Tree are often used interchangeably but they’re different. Both are trees. But Parse Tree is closer to the source, while Abstract Syntax Tree is closer to the semantic.</p>
<p>Considering <cite>[1,2]</cite>, a parse tree looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"array"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">children</span><span class="o">=</span><span class="p">[</span>
    <span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"left_paren"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]),</span>
    <span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"number"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span>
    <span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"comma"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span>
    <span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"number"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]),</span>
    <span class="n">Node</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"right_paren"</span><span class="p">,</span> <span class="nb">slice</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]),</span>
<span class="p">])</span>
</pre></div>
</div>
<p>While an abstract syntax tree looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JsonArray</span><span class="p">(</span>
    <span class="n">JsonNumber</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="n">JsonNumber</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>e.g, left paren, comma, right paren are ignored as they’re not part of the semantic of array. The values in the AST often also have type determined in static-typed programming language.</p>
<p>Generally, you can consider abstract syntax tree as a polished version of parse tree.</p>
<p>Peppa PEG provides two approaches to polish the tree:</p>
<ul class="simple">
<li><p>Use decorators <cite>@</cite> to drop, lift, squash nodes when providing the grammar.</p></li>
<li><p>Use callbacks to manipulate nodes after the tree is produced.</p></li>
</ul>
</section>
<section id="runtime-v-s-compile-time">
<h2>Runtime v/s Compile-time<a class="headerlink" href="#runtime-v-s-compile-time" title="Permalink to this headline">¶</a></h2>
<p>Unlike one of Peppa PEG alternatives - peg/leg, Peppa PEG doesn’t end up with producing C code for the grammar. It holds the grammar and the parser generator in memory so you don’t need an extra compilation step. You will use Peppa PEG in a tree-steps:</p>
<ol class="arabic simple">
<li><p>Load Grammar. Load your grammar using <a class="reference internal" href="api.html#c.P4_LoadGrammar" title="P4_LoadGrammar"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_LoadGrammar()</span></code></a> . Alternatively, you can create your grammar using <a class="reference internal" href="api.html#c.P4_CreateGrammar" title="P4_CreateGrammar"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateGrammar()</span></code></a> and then add grammar rules using <a class="reference internal" href="lowlevel.html#lowlevel"><span class="std std-ref">Low Level APIs</span></a>.</p></li>
<li><p>Parse Source. Wrap source string using <a class="reference internal" href="api.html#c.P4_CreateSource" title="P4_CreateSource"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateSource()</span></code></a> and then parse it using <a class="reference internal" href="api.html#c.P4_Parse" title="P4_Parse"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_Parse()</span></code></a>.</p></li>
<li><p>Traverse Tree. It’s up to you what to do when traversing the tree. You may inspect the tree, produce bytecodes, trim the tree, etc.</p></li>
</ol>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="spec.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Peppa PEG Specification</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="howto.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">How-To Guides</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Ju |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="_sources/concepts.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Concepts</a><ul>
<li><a class="reference internal" href="#what-is-a-parser">What is a Parser?</a></li>
<li><a class="reference internal" href="#what-is-a-grammar">What is a Grammar?</a></li>
<li><a class="reference internal" href="#parse-tree-v-s-abstract-syntax-tree">Parse Tree v/s Abstract Syntax Tree</a></li>
<li><a class="reference internal" href="#runtime-v-s-compile-time">Runtime v/s Compile-time</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>