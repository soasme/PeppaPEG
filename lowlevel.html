<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="All APIs &amp; References" href="api.html" /><link rel="prev" title="Peppa PEG Specification" href="spec.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.01.02"/>
        <title>Low Level APIs - Peppa PEG 1.16.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Peppa PEG 1.16.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Peppa PEG 1.16.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutcalc.html">Tutorial: Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutjson.html">Tutorial: JSON</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="howto.html">How-To Guides</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="spec.html">Peppa PEG Specification</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Low Level APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">All APIs &amp; References</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">Change Log</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="low-level-apis">
<span id="lowlevel"></span><h1>Low Level APIs<a class="headerlink" href="#low-level-apis" title="Permalink to this headline">¶</a></h1>
<section id="use-peg-api">
<h2>Use Peg API<a class="headerlink" href="#use-peg-api" title="Permalink to this headline">¶</a></h2>
<p>Function <a class="reference internal" href="api.html#c.P4_LoadGrammar" title="P4_LoadGrammar"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_LoadGrammar()</span></code></a> can load a grammar from a string.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Grammar</span><span class="o">*</span> <span class="n">grammar</span> <span class="o">=</span> <span class="n">P4_LoadGrammar</span><span class="p">(</span>
    <span class="s2">"add = int + int;"</span>

    <span class="s2">"@squashed @tight "</span>
    <span class="s2">"int = [0-9]+;"</span>

    <span class="s2">"@spaced @lifted "</span>
    <span class="s2">"ws  = </span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">;"</span><span class="p">;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>The one-statement code is somewhat equivalent to the below code written in low-level C API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Grammar</span><span class="o">*</span> <span class="n">grammar</span> <span class="o">=</span> <span class="n">P4_CreateGrammar</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="n">P4_Ok</span> <span class="o">!=</span> <span class="n">P4_AddSequenceWithMembers</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">RuleAdd</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">P4_CreateReference</span><span class="p">(</span><span class="n">RuleInt</span><span class="p">),</span>
    <span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s2">"+"</span><span class="p">,</span> <span class="n">true</span><span class="p">),</span>
    <span class="n">P4_CreateReference</span><span class="p">(</span><span class="n">RuleInt</span><span class="p">)</span>
<span class="p">))</span>
    <span class="n">goto</span> <span class="n">finalize</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">P4_Ok</span> <span class="o">!=</span> <span class="n">P4_AddOnceOrMore</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">RuleInt</span><span class="p">,</span> <span class="n">P4_CreateRange</span><span class="p">(</span><span class="s1">'0'</span><span class="p">,</span> <span class="s1">'9'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span>
    <span class="n">goto</span> <span class="n">finalize</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">P4_Ok</span> <span class="o">!=</span> <span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">RuleInt</span><span class="p">,</span> <span class="n">P4_FLAG_SQUASHED</span><span class="o">|</span><span class="n">P4_FLAG_TIGHT</span><span class="p">))</span>
    <span class="n">goto</span> <span class="n">finalize</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">P4_Ok</span> <span class="o">!=</span> <span class="n">P4_AddLiteral</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">RuleWs</span><span class="p">,</span> <span class="s2">" "</span><span class="p">,</span> <span class="n">true</span><span class="p">))</span>
    <span class="n">goto</span> <span class="n">finalize</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">P4_Ok</span> <span class="o">!=</span> <span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span> <span class="n">RuleWs</span><span class="p">,</span> <span class="n">P4_FLAG_SPACED</span><span class="o">|</span><span class="n">P4_FLAG_LIFTED</span><span class="p">))</span>
    <span class="n">goto</span> <span class="n">finalize</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="expressions">
<h2>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h2>
<section id="literal">
<h3>Literal<a class="headerlink" href="#literal" title="Permalink to this headline">¶</a></h3>
<p>Literal <strong>matches an exact string</strong>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello world"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Literal can be case insensitive for ASCII characters, if the option sensitive is false.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"HELLO WORLD"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Literal can be in UTF-8 format.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"你好, 世界"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Literal can include emoji characters.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Peppa 🐷"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Literal cannot be an empty string.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// WRONG!</span>
<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">""</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_Literal" title="P4_Literal"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_Literal</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateLiteral" title="P4_CreateLiteral"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateLiteral()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddLiteral" title="P4_AddLiteral"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddLiteral()</span></code></a>.</p>
</dd>
</dl>
</section>
<section id="range">
<h3>Range<a class="headerlink" href="#range" title="Permalink to this headline">¶</a></h3>
<p>Range <strong>matches a single character in range</strong>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRange</span><span class="p">(</span><span class="sc">'0'</span><span class="p">,</span><span class="w"> </span><span class="sc">'9'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The lower and upper character of range can be ASCII characters or UTF-8 runes.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRange</span><span class="p">(</span><span class="mh">0x4E00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x9FFF</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Range can be used to match anything (0, or ‘0’, or EOF is used for terminating a string in C):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x10ffff</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The stride parameter allows larger steps when iterating characters in range.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Only match 1, 3, 5, 7, 9.</span>
<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">odd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRange</span><span class="p">(</span><span class="sc">'1'</span><span class="p">,</span><span class="w"> </span><span class="sc">'9'</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The value of lower must be less than the upper.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// WRONG!</span>
<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRange</span><span class="p">(</span><span class="sc">'z'</span><span class="p">,</span><span class="w"> </span><span class="sc">'a'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Range can be an aggregation of several sub-ranges. The below example is
equivalent to a choice of 3 ranges.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_RuneRange</span><span class="w"> </span><span class="n">alphadigits</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{{</span><span class="sc">'a'</span><span class="p">,</span><span class="w"> </span><span class="sc">'z'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="sc">'A'</span><span class="p">,</span><span class="w"> </span><span class="sc">'Z'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="sc">'0'</span><span class="p">,</span><span class="w"> </span><span class="sc">'9'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">}};</span><span class="w"></span>
<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRanges</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">alphadigits</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_Range" title="P4_Range"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_Range</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateRange" title="P4_CreateRange"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateRange()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddRange" title="P4_AddRange"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddRange()</span></code></a>,
<a class="reference internal" href="api.html#c.P4_CreateRanges" title="P4_CreateRanges"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateRanges()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddRanges" title="P4_AddRanges"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddRanges()</span></code></a>.</p>
</dd>
</dl>
</section>
<section id="sequence">
<h3>Sequence<a class="headerlink" href="#sequence" title="Permalink to this headline">¶</a></h3>
<p>Sequence <strong>matches a sequence of sub-expressions in order</strong>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequenceWithMembers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">","</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"World"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>When parsing, the first sequence member is attempted. If succeeds, the second is attempted, so on and on.
If any one of the attempts fails, the match fails.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Hello,WORLD
_____ Literal "Hello", success!
     _ Literal ",", success!
      _____ Insensitive Literal "World", success!
___________ Sequence: success!

Hello,UNIVERSE
_____ Literal "Hello", success!
     _ Literal ",", success!
      _____ Insensitive Literal "World", failure!
Sequence: failure!
</pre></div>
</div>
<p>The members can be set after the Sequence is created:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequence</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">expr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">oom</span><span class="p">;</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">P4_SetMember</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">P4_Ok</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">oom</span><span class="p">;</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">P4_SetMember</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">","</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">P4_Ok</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">oom</span><span class="p">;</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">P4_SetMember</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"World"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">P4_Ok</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">oom</span><span class="p">;</span><span class="w"></span>

<span class="nl">oom</span><span class="p">:</span><span class="w"> </span><span class="n">P4_DeleteExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_Sequence" title="P4_Sequence"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_Sequence</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateSequence" title="P4_CreateSequence"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateSequence()</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateSequenceWithMembers" title="P4_CreateSequenceWithMembers"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateSequenceWithMembers()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddSequence" title="P4_AddSequence"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddSequence()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddSequenceWithMembers" title="P4_AddSequenceWithMembers"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddSequenceWithMembers()</span></code></a>, <a class="reference internal" href="api.html#c.P4_SetMember" title="P4_SetMember"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_SetMember()</span></code></a>.</p>
</dd>
</dl>
</section>
<section id="backreference">
<h3>BackReference<a class="headerlink" href="#backreference" title="Permalink to this headline">¶</a></h3>
<p>BackReference <strong>matches an exact string previously matched in a Sequence</strong>. BackReference can and only can be used as a Sequence member. For example, the below snippet matches “a:a”, but not “a:A” or “a:b”.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequenceWithMembers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateRange</span><span class="p">(</span><span class="sc">'a'</span><span class="p">,</span><span class="w"> </span><span class="sc">'z'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">":"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateBackReference</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The BackReference can be case insensitive, regardless whether the original match was case sensitive. For example, the below snippet matches “a:a” and “a:A”.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequenceWithMembers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateRange</span><span class="p">(</span><span class="sc">'a'</span><span class="p">,</span><span class="w"> </span><span class="sc">'z'</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">":"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateBackReference</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The index value of a BackReference must be less than the total number of members in a Sequence.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// WRONG!</span>
<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequenceWithMembers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">":"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateBackReference</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The index value of a BackReference must not be the index of itself.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// WRONG!</span>
<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequenceWithMembers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">":"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateBackReference</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_BackReference" title="P4_BackReference"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_BackReference</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateBackReference" title="P4_CreateBackReference"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateBackReference()</span></code></a>.</p>
</dd>
</dl>
</section>
<section id="choice">
<h3>Choice<a class="headerlink" href="#choice" title="Permalink to this headline">¶</a></h3>
<p>Choice <strong>matches one of the sub-expression.</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateChoiceWithMembers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Kia Ora"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"你好"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>When parsing, the first sequence member is attempted. If fails, the second is attempted, so on and on.
If any one of the attempts succeeds, the match succeeds. If all attempts fail, the match fails.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>你好
Literal "Hello", failure!
Literal "Kia Ora", failure|
____ Literal "你好", success!
____ Choice: success!

Ciao
Literal "Hello", failure!
Literal "Kia Ora", failure|
Literal "你好", failure!
Choice: failure!
</pre></div>
</div>
<p>Similar to Sequence, the members can be set after the Choice is created.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateChoice</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">expr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">oom</span><span class="p">;</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">P4_SetMember</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">P4_Ok</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">oom</span><span class="p">;</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">P4_SetMember</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Kia Ora"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">P4_Ok</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">oom</span><span class="p">;</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">P4_SetMember</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"你好"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">P4_Ok</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">oom</span><span class="p">;</span><span class="w"></span>

<span class="nl">oom</span><span class="p">:</span><span class="w"> </span><span class="n">P4_DeleteExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_Choice" title="P4_Choice"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_Choice</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateChoice" title="P4_CreateChoice"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateChoice()</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateChoiceWithMembers" title="P4_CreateChoiceWithMembers"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateChoiceWithMembers()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddChoice" title="P4_AddChoice"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddChoice()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddChoiceWithMembers" title="P4_AddChoiceWithMembers"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddChoiceWithMembers()</span></code></a>, <a class="reference internal" href="api.html#c.P4_SetMember" title="P4_SetMember"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_SetMember()</span></code></a>.</p>
</dd>
</dl>
</section>
<section id="reference">
<h3>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h3>
<p>Reference <strong>matches a string based on the referenced grammar rule</strong>.</p>
<p>A grammar includes a set of grammar rules.  Each grammar rule is built from <a class="reference internal" href="api.html#c.P4_Expression" title="P4_Expression"><code class="xref c c-struct docutils literal notranslate"><span class="pre">P4_Expression</span></code></a> and is associated with an id.  A grammar rule can then be referenced in other grammar rules.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_AddLiteral</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"text"</span><span class="p">,</span><span class="w"> </span><span class="s">"Hello,WORLD"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"></span>

<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateReference</span><span class="p">(</span><span class="s">"text"</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The referenced grammar rule must exist before calling <a class="reference internal" href="api.html#c.P4_Parse" title="P4_Parse"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_Parse()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_Reference" title="P4_Reference"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_Reference</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateReference" title="P4_CreateReference"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateReference()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddReference" title="P4_AddReference"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddReference()</span></code></a>.</p>
</dd>
</dl>
</section>
<section id="positive">
<h3>Positive<a class="headerlink" href="#positive" title="Permalink to this headline">¶</a></h3>
<p>Positive <strong>tests if the sub-expression matches</strong>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreatePositive</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>Positive attempts to match the sub-expression. If succeeds, the test passes. Positive does not “consume” any text.</p>
<p>Positive can be useful in limiting the possibilities of the latter member in a Sequence. In this example, the Sequence expression must start with “Hello”, e.g. “Hello World”, “Hello WORLD”, “Hello world”, etc, will match but “HELLO WORLD” will not match.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequenceWithMembers</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreatePositive</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello World"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_Positive" title="P4_Positive"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_Positive</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreatePositive" title="P4_CreatePositive"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreatePositive()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddPositive" title="P4_AddPositive"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddPositive()</span></code></a>.</p>
</dd>
</dl>
</section>
<section id="negative">
<h3>Negative<a class="headerlink" href="#negative" title="Permalink to this headline">¶</a></h3>
<p>Negative <strong>tests if the sub-expression does not match</strong>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateNegative</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>Negative expects the sub-expression doesn’t match. If fails, the test passes. Negative does not “consume” any text.</p>
<p>Negative can be useful in limiting the possiblities of the latter member in a Sequence. In this example, the Sequence expression must not start with “Hello”, e.g. “HELLO World”, “hello WORLD”, “hello world”, etc, will match but “Hello World” will not match.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequenceWithMembers</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateNegative</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello World"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_Negative" title="P4_Negative"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_Negative</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateNegative" title="P4_CreateNegative"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateNegative()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddNegative" title="P4_AddNegative"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddNegative()</span></code></a>.</p>
</dd>
</dl>
</section>
<section id="cut">
<h3>Cut<a class="headerlink" href="#cut" title="Permalink to this headline">¶</a></h3>
<p>Cut <strong>matches everything but avoids unwanted backtracking.</strong></p>
<p>For example,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateChoiceWithMembers</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateReference</span><span class="p">(</span><span class="s">"array"</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateReference</span><span class="p">(</span><span class="s">"null"</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateSequenceWithMembers</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"["</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateCut</span><span class="p">(),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"]"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
<span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"null"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="repeat">
<h3>Repeat<a class="headerlink" href="#repeat" title="Permalink to this headline">¶</a></h3>
<p>Repeat <strong>matches the sub-expression several times</strong>.</p>
<p>ZeroOrOnce, ZeroOrMore, OnceOrMore consume zero or one , zero or more, or one or more consecutive repetitions of their sub-expression.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateZeroOrOnce</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateZeroOrMore</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateOnceOrMore</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>ZeroOrOnce and ZeroOrMore always succeeds because it allows matching zero times.</p>
<p>The repetition can also be set with designated min or max times.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRepeatMin</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRepeatMax</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRepeatExact</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_Expression</span><span class="o">*</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P4_CreateRepeatMinMax</span><span class="p">(</span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All Repeat expressions can be rewritten with P4_CreateRepeatMinMax.</p>
<ul class="simple">
<li><p>ZeroOrOnce: P4_CreateRepeatMinMax(expr, 0, 1);</p></li>
<li><p>ZeroOrMore: P4_CreateRepeatMinMax(expr, 0, SIZE_MAX);</p></li>
<li><p>OnceOrMore: P4_CreateRepeatMinMax(expr, 1, SIZE_MAX);</p></li>
<li><p>RepeatMin: P4_CreateRepeatMinMax(expr, min, SIZE_MAX);</p></li>
<li><p>RepeatMax: P4_CreateRepeatMinMax(expr, 0, max);</p></li>
<li><p>RepeatExact: P4_CreateRepeatMinMax(expr, n, n);</p></li>
</ul>
<p>However, using the derived names can improve the readability of the code.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="api.html#c.P4_ExpressionKind.P4_Repeat" title="P4_Repeat"><code class="xref c c-enum docutils literal notranslate"><span class="pre">P4_Repeat</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateZeroOrOnce" title="P4_CreateZeroOrOnce"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateZeroOrOnce()</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateZeroOrMore" title="P4_CreateZeroOrMore"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateZeroOrMore()</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateOnceOrMore" title="P4_CreateOnceOrMore"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateOnceOrMore()</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateRepeatMin" title="P4_CreateRepeatMin"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateRepeatMin()</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateRepeatMax" title="P4_CreateRepeatMax"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateRepeatMax()</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateRepeatMinMax" title="P4_CreateRepeatMinMax"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateRepeatMinMax()</span></code></a>, <a class="reference internal" href="api.html#c.P4_CreateRepeatExact" title="P4_CreateRepeatExact"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_CreateRepeatExact()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddZeroOrOnce" title="P4_AddZeroOrOnce"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddZeroOrOnce()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddZeroOrMore" title="P4_AddZeroOrMore"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddZeroOrMore()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddOnceOrMore" title="P4_AddOnceOrMore"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddOnceOrMore()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddRepeatMin" title="P4_AddRepeatMin"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddRepeatMin()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddRepeatMax" title="P4_AddRepeatMax"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddRepeatMax()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddRepeatMinMax" title="P4_AddRepeatMinMax"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddRepeatMinMax()</span></code></a>, <a class="reference internal" href="api.html#c.P4_AddRepeatExact" title="P4_AddRepeatExact"><code class="xref c c-func docutils literal notranslate"><span class="pre">P4_AddRepeatExact()</span></code></a>.</p>
</dd>
</dl>
</section>
</section>
<section id="expression-flags">
<h2>Expression Flags<a class="headerlink" href="#expression-flags" title="Permalink to this headline">¶</a></h2>
<p>Flags can only be used in the grammar rule expression itself. It can not be used in any sub-expression of the grammar rule expression.</p>
<p>Usually, a grammar rule creates a node. The expression flags modify the behavior of the node generation.</p>
<section id="p4-flag-squashed">
<h3><cite>P4_FLAG_SQUASHED</cite><a class="headerlink" href="#p4-flag-squashed" title="Permalink to this headline">¶</a></h3>
<p>Flag <cite>P4_FLAG_SQUASHED</cite> <strong>prevents generating children nodes</strong>.</p>
<p>For example,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_AddSequenceWithMembers</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateReference</span><span class="p">(</span><span class="n">Text</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateReference</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
<span class="n">P4_AddLiteral</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="n">Text</span><span class="p">,</span><span class="w"> </span><span class="s">"x"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>This grammar parses the text “xx” into three nodes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Token</span><span class="p">(</span><span class="mf">0..2</span><span class="p">):</span> <span class="s2">"Xx"</span>
  <span class="n">Token</span><span class="p">(</span><span class="mf">0..1</span><span class="p">)</span> <span class="s2">"X"</span>
  <span class="n">Token</span><span class="p">(</span><span class="mf">1..2</span><span class="p">)</span> <span class="s2">"x"</span>
</pre></div>
</div>
<p>If the grammar rule <cite>“entry”</cite> has flag <cite>P4_FLAG_SQUASHED</cite>, the children nodes disappear:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="n">P4_FLAG_SQUASHED</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Token</span><span class="p">(</span><span class="mf">0..2</span><span class="p">):</span> <span class="s2">"Xx"</span>
</pre></div>
</div>
<p>Flag <cite>P4_FLAG_SQUASHED</cite> takes effects not only on the expression but its all descendant expressions.</p>
</section>
<section id="p4-flag-lifted">
<h3><cite>P4_FLAG_LIFTED</cite><a class="headerlink" href="#p4-flag-lifted" title="Permalink to this headline">¶</a></h3>
<p><cite>P4_FLAG_LIFTED</cite> <strong>replaces the node with its children nodes</strong>.</p>
<p>For example,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_AddSequenceWithMembers</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateReference</span><span class="p">(</span><span class="n">Text</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateReference</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
<span class="n">P4_AddLiteral</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="n">Text</span><span class="p">,</span><span class="w"> </span><span class="s">"x"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>This grammar can match text “xx” into three nodes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Token</span><span class="p">(</span><span class="mf">0..2</span><span class="p">):</span> <span class="s2">"Xx"</span>
  <span class="n">Token</span><span class="p">(</span><span class="mf">0..1</span><span class="p">)</span> <span class="s2">"X"</span>
  <span class="n">Token</span><span class="p">(</span><span class="mf">1..2</span><span class="p">)</span> <span class="s2">"x"</span>
</pre></div>
</div>
<p>If the grammar rule <cite>“entry”</cite> has flag <cite>P4_FLAG_LIFTED</cite>, the node is lifted and replaced by its children:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="n">P4_FLAG_LIFTED</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Token</span><span class="p">(</span><span class="mf">0..1</span><span class="p">):</span> <span class="s2">"X"</span>
<span class="n">Token</span><span class="p">(</span><span class="mf">1..2</span><span class="p">):</span> <span class="s2">"x"</span>
</pre></div>
</div>
</section>
<section id="p4-flag-non-terminal">
<h3><cite>P4_FLAG_NON_TERMINAL</cite><a class="headerlink" href="#p4-flag-non-terminal" title="Permalink to this headline">¶</a></h3>
<p><cite>P4_FLAG_NON_TERMINAL</cite> <strong>replaces the node with its single child node or does nothing.</strong>.</p>
<p>For example,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_AddSequenceWithMembers</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">"("</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateReference</span><span class="p">(</span><span class="n">Text</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_CreateLiteral</span><span class="p">(</span><span class="s">")"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
<span class="n">P4_AddLiteral</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="n">Text</span><span class="p">,</span><span class="w"> </span><span class="s">"x"</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>This grammar can match text “(x)” into two nodes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Token</span><span class="p">(</span><span class="mf">0..3</span><span class="p">):</span> <span class="s2">"(x)"</span>
  <span class="n">Token</span><span class="p">(</span><span class="mf">1..2</span><span class="p">)</span> <span class="s2">"x"</span>
</pre></div>
</div>
<p>If the grammar rule <cite>“entry”</cite> has flag <cite>P4_FLAG_NON_TERMINAL</cite>, the node is lifted and replaced by its single child node:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="n">P4_FLAG_NON_TERMINAL</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Token</span><span class="p">(</span><span class="mf">1..2</span><span class="p">):</span> <span class="s2">"x"</span>
</pre></div>
</div>
<p>This flag only works for Sequence and Repeat expressions.</p>
<p>This flag has no effect if the Sequence or Repeat expressions produces over one node, e.g, the parent node will not be lifted.</p>
</section>
<section id="p4-flag-spaced">
<h3><cite>P4_FLAG_SPACED</cite><a class="headerlink" href="#p4-flag-spaced" title="Permalink to this headline">¶</a></h3>
<p><cite>P4_FLAG_SPACED</cite> <strong>indicates the expression is for whitespaces</strong>.</p>
<p>For example,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_AddLiteral</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"whitespace"</span><span class="p">,</span><span class="w"> </span><span class="s">" "</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"></span>

<span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"whitespace"</span><span class="p">,</span><span class="w"> </span><span class="n">P4_FLAG_SPACED</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Often, we don’t want the whitespace having nodes, so it’s usually combined with <cite>P4_FLAG_LIFTED</cite>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"whitespace"</span><span class="p">,</span><span class="w"> </span><span class="n">P4_FLAG_SPACED</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">P4_FLAG_LIFTED</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>This flag does not work on its own. It takes effect on Sequence or Repeat.</p>
<p>When parsing Sequence and Repeat, the grammar will match as many whitespaces as possible between every sequence member or every repetition sub-expression.</p>
<p>For example, this rule matches “HelloWorld”, “Hello World”, “Hello       World”, etc.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_AddSequenceWithMembers</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_AddLiteral</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">P4_AddLiteral</span><span class="p">(</span><span class="s">"World"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>For example, this rule matches “xxx”, “x   x         x”, etc.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_AddOnceOrMore</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="n">P4_AddLiteral</span><span class="p">(</span><span class="s">"x"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>The SPACED expressions are not inserted before or after the Sequence and Repeat, hence ”  Hello World  “, ”  xxx  ” not matching.</p>
</section>
<section id="p4-flag-tight">
<h3><cite>P4_FLAG_TIGHT</cite><a class="headerlink" href="#p4-flag-tight" title="Permalink to this headline">¶</a></h3>
<p><cite>P4_FLAG_TIGHT</cite> <strong>prevents inserting the `P4_FLAG_SPACED` expressions</strong>. This tag only works for Sequence and Repeat.</p>
<p>Given the above <cite>P4_FLAG_SPACED</cite> expression, if we set the grammar rule with flag <cite>P4_FLAG_TIGHT</cite>, the SPACED expressions are not inserted.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="n">P4_FLAG_TIGHT</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Peppa PEG applies SPACED expressions on every Sequence and Repeat unless a <cite>P4_FLAG_TIGHT</cite> is explicitly specified on a Sequence or Repeat.</p>
<p>Flag <cite>P4_FLAG_TIGHT</cite> takes effects not only on the expression but its all descendant expressions.</p>
</section>
<section id="p4-flag-scoped">
<h3><cite>P4_FLAG_SCOPED</cite><a class="headerlink" href="#p4-flag-scoped" title="Permalink to this headline">¶</a></h3>
<p><cite>P4_FLAG_SCOPED</cite> <strong>prevents the effect of `P4_FLAG_SQUASHED` and `P4_FLAG_SPACED`</strong>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">P4_SetGrammarRuleFlag</span><span class="p">(</span><span class="n">grammar</span><span class="p">,</span><span class="w"> </span><span class="s">"entry"</span><span class="p">,</span><span class="w"> </span><span class="n">P4_FLAG_SCOPED</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Starting from the SCOPED grammar rule, the nodes are not squashed; the implicit whitespace is enabled as well.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">All APIs &amp; References</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="spec.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Peppa PEG Specification</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Ju |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="_sources/lowlevel.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Low Level APIs</a><ul>
<li><a class="reference internal" href="#use-peg-api">Use Peg API</a></li>
<li><a class="reference internal" href="#expressions">Expressions</a><ul>
<li><a class="reference internal" href="#literal">Literal</a></li>
<li><a class="reference internal" href="#range">Range</a></li>
<li><a class="reference internal" href="#sequence">Sequence</a></li>
<li><a class="reference internal" href="#backreference">BackReference</a></li>
<li><a class="reference internal" href="#choice">Choice</a></li>
<li><a class="reference internal" href="#reference">Reference</a></li>
<li><a class="reference internal" href="#positive">Positive</a></li>
<li><a class="reference internal" href="#negative">Negative</a></li>
<li><a class="reference internal" href="#cut">Cut</a></li>
<li><a class="reference internal" href="#repeat">Repeat</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expression-flags">Expression Flags</a><ul>
<li><a class="reference internal" href="#p4-flag-squashed"><cite>P4_FLAG_SQUASHED</cite></a></li>
<li><a class="reference internal" href="#p4-flag-lifted"><cite>P4_FLAG_LIFTED</cite></a></li>
<li><a class="reference internal" href="#p4-flag-non-terminal"><cite>P4_FLAG_NON_TERMINAL</cite></a></li>
<li><a class="reference internal" href="#p4-flag-spaced"><cite>P4_FLAG_SPACED</cite></a></li>
<li><a class="reference internal" href="#p4-flag-tight"><cite>P4_FLAG_TIGHT</cite></a></li>
<li><a class="reference internal" href="#p4-flag-scoped"><cite>P4_FLAG_SCOPED</cite></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>